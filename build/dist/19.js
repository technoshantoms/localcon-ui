(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{342:function(e,t,a){"use strict";var s=a(0),n=a.n(s),o=a(1),r=a.n(o),i=a(5),c=a(82),l=a(2),u=a.n(l),m=a(64),p=a(73),h=a(4),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}();var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={amount:0,showError:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),d(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,a=e.asset;this.setState({amount:t,asset:a})}},{key:"getBalance",value:function(){var e=this,t=this.props.account.get("balances"),a=0;return t&&t.forEach((function(t,s){if(s==e.props.assetId){var n=h.b.getObject(t);a=n.get("balance")}})),a}},{key:"onSubmit",value:function(){var e=i.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e;var a=this.getBalance();t<=0||t>a?this.setState({showError:!0}):(this.setState({showError:!1}),p.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose())}},{key:"render",value:function(){var e=this,t=this.props.assetId;return n.a.createElement("form",{className:"grid-block vertical full-width-content"},n.a.createElement(r.a,{component:"h3",content:"modal.reserve.title"}),n.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},n.a.createElement("div",{className:"content-block",onClick:function(){e.setState({showError:!1})}},n.a.createElement(m.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:n.a.createElement(c.a,{balance:this.props.account.getIn(["balances",t])}),tabIndex:1})),this.state.showError?n.a.createElement("p",{className:"errorModal"},u.a.translate("exchange.invalid_amount")):null,n.a.createElement("div",{className:"content-block button-group"},n.a.createElement("input",{type:"submit",className:"button success btn large inverted",onClick:this.onSubmit.bind(this),value:u.a.translate("modal.reserve.submit"),tabIndex:2}),n.a.createElement("div",{className:"button btn large outline",onClick:this.props.onClose,tabIndex:3},u.a.translate("cancel")))))}}]),t}(n.a.Component);t.a=b},5277:function(e,t,a){"use strict";a.r(t);var s=a(103),n=a(0),o=a.n(n),r=a(3),i=a.n(r),c=a(7),l=a(1),u=a.n(l),m=a(73),p=a(98),h=a(25),d=a(36),b=a(14),f=a(22),v=a.n(f),_=a(28),y=a(5),g=a(43),E=a(528),k=a(342),w=a(18),C=a(44),N=a(6),O=a(41),S=(a(67),a(2)),A=a.n(S),j=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}();var x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={create:{symbol:"",name:"",description:"",max_supply:1e15,precision:4},issue:{amount:0,to:"",to_id:"",asset_id:"",symbol:""},errors:{symbol:null},isValid:!1,searchTerm:""},a._searchAccounts=Object(s.a)(a._searchAccounts,150),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),j(t,[{key:"_checkAssets",value:function(e,t){if(!this.props.account.get("assets").size){var a=e.sort((function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0})).last();0===e.size||t?(m.a.getAssetList.defer("A",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(m.a.getAssetList.defer(a.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:"componentWillReceiveProps",value:function(e){this._checkAssets(e.assets)}},{key:"componentWillMount",value:function(){this._checkAssets(this.props.assets,!0)}},{key:"_onIssueInput",value:function(e,t){var a=t.target.id,s=this.state.issue;if("to"===a){this._searchAccounts(t.target.value),s.to=t.target.value;var n=this.props.searchAccounts.findEntry((function(e){return e===t.target.value}));s.to_id=n?n[0]:null}else s[e]=t.target.value;this.setState({issue:s})}},{key:"_searchAccounts",value:function(e){h.a.accountSearch(e)}},{key:"_issueAsset",value:function(e,t){var a=this;t.preventDefault(),v.a.publish("issue_asset","close");var s=this.state.issue,n=this.props.assets.get(s.asset_id);s.amount*=y.a.get_asset_precision(n.precision),m.a.issueAsset(e,s).then((function(e){e?(_.a.addNotification({message:"Successfully issued "+y.a.format_asset(s.amount,a.props.assets.get(s.asset_id)),level:"success",autoDismiss:10}),ChainStore.getAsset(s.asset_id)):_.a.addNotification({message:"Failed to issue asset",level:"error",autoDismiss:10})}))}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),v.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),v.a.publish("reserve_asset","close");var a=this.state.issue,s=this.props.assets.get(a.asset_id);a.amount*=y.a.get_asset_precision(s.precision),m.a.issueAsset(e,a)}},{key:"_issueButtonClick",value:function(e,t,a){a.preventDefault();var s=this.state.issue;s.asset_id=e,s.symbol=t,this.setState({issue:s}),v.a.publish("issue_asset","open")}},{key:"_editButtonClick",value:function(e,t,a){a.preventDefault(),this.props.router.push("/account/"+t+"/update-asset/"+e)}},{key:"_onAccountSelect",value:function(e){var t=this.state.issue;t.to=e,t.to_id=this.props.account_name_to_id[e],this.setState({issue:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,s=t.account_name,n=t.assets,r=t.assetsList,i=!0;if(!a)return o.a.createElement(g.a,{type:"circle"});if(a.notFound&&(i=!1),!i)return o.a.createElement("div",{className:"grid-block"},o.a.createElement("h5",null,o.a.createElement(u.a,{component:"h5",content:"account.errors.not_found",name:s})));r.length&&(n=n.clear(),r.forEach((function(e){e&&(n=n.set(e.get("id"),e.toJS()))})));var l=n.filter((function(e){return e.issuer===a.get("id")})).sort((function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)})).map((function(t){var a=C.a.parseDescription(t.options.description),n=a.short_name?a.short_name:a.main;n.length>100&&(n=n.substr(0,100)+"...");var r=e.props.getDynamicObject(t.dynamic_asset_data_id);return o.a.createElement("tr",{key:t.symbol},o.a.createElement("td",null,o.a.createElement(c.b,{to:"/asset/"+t.symbol},t.symbol)),o.a.createElement("td",{style:{maxWidth:"250px"}},n),o.a.createElement("td",null,r?o.a.createElement(b.a,{amount:parseInt(r.get("current_supply"),10),asset:t.id}):null),o.a.createElement("td",null,o.a.createElement(b.a,{amount:parseInt(t.options.max_supply,10),asset:t.id})),o.a.createElement("td",null,t.bitasset_data_id?null:o.a.createElement("button",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol),className:"btn outline"},A.a.translate("transaction.trxTypes.asset_issue"))),o.a.createElement("td",null,t.bitasset_data_id?null:o.a.createElement("button",{onClick:e._reserveButtonClick.bind(e,t.id),className:"btn outline"},o.a.createElement(u.a,{content:"transaction.trxTypes.asset_reserve"}))),o.a.createElement("td",null,o.a.createElement("button",{onClick:e._editButtonClick.bind(e,t.symbol,s),className:"btn outline"},A.a.translate("transaction.trxTypes.asset_update"))))})).toArray();return o.a.createElement("div",{className:"assets-layout"},o.a.createElement("h2",{className:"content__heading"},A.a.translate("account.user_issued_assets.issued_assets")),o.a.createElement("div",{className:"negative-margins"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"content-block"},o.a.createElement("table",{className:"blue-bg with-borders"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(u.a,{content:"account.user_issued_assets.symbol"})),o.a.createElement("th",{style:{maxWidth:"200px"}},o.a.createElement(u.a,{content:"account.user_issued_assets.description"})),o.a.createElement(u.a,{component:"th",content:"markets.supply"}),o.a.createElement("th",null,o.a.createElement(u.a,{content:"account.user_issued_assets.max_supply"})),o.a.createElement("th",{style:{textAlign:"center"},colSpan:"3"},o.a.createElement(u.a,{content:"account.perm.action"})))),o.a.createElement("tbody",null,l))),o.a.createElement("div",{className:"content-block"},o.a.createElement(c.b,{to:"/account/"+s+"/create-asset/"},o.a.createElement("button",{className:"btn large inverted"},A.a.translate("transaction.trxTypes.asset_create")))))),o.a.createElement(d.a,{id:"issue_asset",overlay:!0},o.a.createElement("br",null),o.a.createElement("div",{className:"grid-block vertical"},o.a.createElement(E.a,{asset_to_issue:this.state.issue.asset_id,onClose:function(){v.a.publish("issue_asset","close")}}))),o.a.createElement(d.a,{id:"reserve_asset",overlay:!0},o.a.createElement("br",null),o.a.createElement("div",{className:"grid-block vertical"},o.a.createElement(k.a,{assetId:this.state.reserve,account:a,onClose:function(){v.a.publish("reserve_asset","close")}}))))}}]),t}(o.a.Component);x.defaultProps={symbol:"",name:"",description:"",max_supply:0,precision:0},x.propTypes={symbol:i.a.string.isRequired},x=Object(O.a)(x,{propNames:["assetsList"],asList:!0,withDynamic:!0}),t.default=Object(w.connect)(x,{listenTo:function(){return[p.a]},getProps:function(e){var t=Object(N.Map)(),a=Object(N.List)();return e.account.get("assets",[]).size?e.account.get("assets",[]).forEach((function(e){a=a.push(e)})):t=p.a.getState().assets,{assets:t,assetsList:a}}})},528:function(e,t,a){"use strict";(function(e){var s=a(0),n=a.n(s),o=a(1),r=a.n(o),i=a(8),c=a(13),l=a(5),u=a(2),m=a.n(u),p=a(73),h=a(51),d=a(64),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}();var f=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={amount:e.amount,to:e.to,to_id:null,memo:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),b(a,[{key:"onAmountChanged",value:function(e){var t=e.amount;this.setState({amount:t})}},{key:"onToAccountChanged",value:function(e){var t=e?{to:e.get("name"),to_id:e.get("id")}:{to_id:null};this.setState(t)}},{key:"onToChanged",value:function(e){this.setState({to:e,to_id:null})}},{key:"onSubmit",value:function(){var t=this.props.asset_to_issue,a=l.a.get_asset_precision(t.get("precision")),s=this.state.amount.toString().replace(/,/g,"");s*=a,p.a.issueAsset(this.state.to_id,t.get("issuer"),t.get("id"),s,this.state.memo?new e(this.state.memo,"utf-8"):this.state.memo),this.setState({amount:0,to:"",to_id:null,memo:""})}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value})}},{key:"render",value:function(){var e=this.props.asset_to_issue.get("id"),t=1;return n.a.createElement("form",{className:"grid-block vertical full-width-content"},n.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},n.a.createElement("div",{className:"content-block"},n.a.createElement(h.a,{label:"modal.issue.to",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),n.a.createElement("div",{className:"content-block"},n.a.createElement(d.a,{label:"modal.issue.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),n.a.createElement("div",{className:"content-block"},n.a.createElement("label",null,n.a.createElement(r.a,{component:"span",content:"transfer.memo"})," ","(",n.a.createElement(r.a,{content:"transfer.optional"}),")"),n.a.createElement("textarea",{rows:"3",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})),n.a.createElement("div",{className:"content-block button-group"},n.a.createElement("button",{type:"submit",className:"button primary",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),disabled:!this.state.to_id||!this.state.amount,tabIndex:t++},m.a.translate("modal.issue.submit")),n.a.createElement("button",{className:"button primary hollow",onClick:this.props.onClose,tabIndex:t++},m.a.translate("cancel")))))}}]),a}(n.a.Component);f.propTypes={asset_to_issue:i.a.ChainAsset.isRequired},t.a=Object(c.a)(f)}).call(this,a(50).Buffer)}}]);